# .version-tracking.md - Template for AI Coding Agents

## Purpose

`.version-tracking.md` is an **internal detailed tracking log for AI coding agents** (like Claude Code) to maintain persistent technical knowledge across sessions. It serves as the AI's "lab notebook" to quickly understand what was implemented, where, and how‚Äîwithout needing to re-explore the entire codebase.

## Key Differences from CHANGELOG.md

| Aspect | CHANGELOG.md | .version-tracking.md |
|--------|--------------|---------------------|
| **Audience** | End users, contributors, stakeholders | AI coding agents (Claude, Copilot, etc.) |
| **Visibility** | Public, committed to git | Private, in `.gitignore` |
| **Format** | Clean, user-friendly release notes | Technical implementation details |
| **Content** | What changed and why users care | Exact locations, functions, line numbers, code snippets |
| **Detail Level** | High-level feature descriptions | Low-level implementation specifics |

## When to Update

Update `.version-tracking.md` **every time you make code changes**, including:
- ‚úÖ Adding new features
- ‚úÖ Fixing bugs
- ‚úÖ Refactoring code
- ‚úÖ Updating dependencies
- ‚úÖ Changing configuration
- ‚úÖ Documentation updates affecting implementation

## Required Information for Each Entry

### 1. Version Header
```markdown
### v4.6.0 (2025-12-15) - MINOR
**Feature Name - Detailed Implementation:**
```

### 2. File Locations
**Always include exact file paths and line numbers:**
```markdown
**Location:** `src/main.rs`, function `run_heimdall_rust()` (starts ~line 1695)
```

### 3. Code Changes
**Include specific variables, functions, and snippets:**
```markdown
**New Variables Added:**
- `results14: Vec<String>` (line 1744) - Stores Azure secrets findings
- `results15: Vec<String>` (line 1745) - Stores GCP secrets findings

**New Functions:**
- `parse_azure_secrets()` (line 2450) - Parses Azure connection strings
  - Parameters: `content: &str, pattern: &Regex`
  - Returns: `Vec<Finding>`
```

### 4. Regex Patterns / Algorithms
**Include full patterns and explanations:**
```markdown
**New Regex Pattern (line 1714):**
```regex
(?i)(AccountKey=|SharedAccessSignature=sig=)[a-zA-Z0-9+/=]{40,}
```
- Detects: Azure Storage connection strings and SAS tokens
- Case-insensitive (`(?i)`)
- Matches AccountKey or SAS signature followed by 40+ base64 chars
```

### 5. Configuration Changes
```markdown
**Configuration Updates:**
- `Cargo.toml`: Added dependency `azure-sdk = "0.5.0"`
- `stormbreaker.toml`: New optional field `azure_scanning = true` (default: true)
```

### 6. CLI/API Changes
```markdown
**CLI Updates:**
- Line 118: Added `--tool azure` flag to Heimdall subcommand
- Line 1767: Updated help text to include "azure" in available options
```

### 7. Testing Details
```markdown
**Testing:**
- Test file: `/tmp/stormbreaker-test/test_secrets.txt`
- Verified detection: Azure (1 connection string, 2 SAS tokens)
- Commands tested: `heimdall --tool azure -v`
- Edge cases: Empty files, malformed tokens, Unicode characters
```

### 8. Known Issues / TODOs
```markdown
**Known Limitations:**
- Azure Managed Identity tokens not yet supported (TODO: v4.7.0)
- SAS token expiration not validated (performance trade-off)
```

## Template Structure

```markdown
### vX.Y.Z (YYYY-MM-DD) - MAJOR|MINOR|PATCH
**Feature/Fix Name - Detailed Implementation:**

**Location:** `path/to/file.rs`, function `function_name()` (lines XXX-YYY)

**Changes Made:**
1. **New Functions/Structs:**
   - `function_name()` (line XXX): Description
     - Parameters: `param1: Type1, param2: Type2`
     - Returns: `ReturnType`
     - Algorithm: Brief explanation

2. **Modified Functions:**
   - `existing_function()` (line XXX):
     - Changed from: `old implementation`
     - Changed to: `new implementation`
     - Reason: Performance improvement / bug fix / feature addition

3. **New Variables/Fields:**
   - `variable_name: Type` (line XXX) - Purpose and usage

4. **Regex Patterns / Complex Logic:**
   ```language
   pattern or code snippet
   ```
   - Explanation of what it does
   - Edge cases handled

**CLI/API Changes:**
- Command line flags added/removed
- Help text updates (line numbers)
- New subcommands or options

**Configuration Updates:**
- File: `config.toml` - Added `new_field = "value"`
- File: `Cargo.toml` - Version bumps, new dependencies

**Output Files:**
- New files created: `output_name-<timestamp>.ext`
- File format changes
- Naming conventions

**Testing:**
- Test cases created/modified
- Commands tested
- Results verified
- Edge cases covered

**Documentation Updates:**
- Files modified: README.MD (lines X-Y), CLAUDE.md (lines A-B)
- Sections updated: Architecture, Usage, Examples

**Version Bump Rationale:**
- MAJOR: Breaking changes (explain what breaks)
- MINOR: New features (backward compatible)
- PATCH: Bug fixes only
```

## Good Examples

### ‚úÖ GOOD - Detailed and Specific
```markdown
### v4.6.0 (2025-12-15) - MINOR
**Heimdall Azure Secrets Detection - Detailed Implementation:**

**Location:** `src/main.rs`, function `run_heimdall_rust()` (lines 1695-2042)

**New Regex Pattern (line 1714):**
```regex
(?i)(AccountKey=|SharedAccessSignature=sig=)[a-zA-Z0-9+/=]{40,}
```
- Matches Azure Storage connection strings with AccountKey
- Matches SAS tokens with signature parameter
- Case-insensitive for flexibility

**New Variables:**
- `results14: Vec<String>` (line 1744) - Stores Azure secret findings
- `re_azure: Regex` (line 1714) - Azure credential pattern matcher

**Scanning Logic (lines 1842-1845):**
```rust
if run_all || which_lc == "azure" {
    for m in re_azure.find_iter(&content) {
        results14.push(format!("{}{}", display, m.as_str()));
    }
}
```

**CLI Updates:**
- Line 118: Help text updated to include `azure` in `--tool` options
- New usage: `stormbreaker heimdall --tool azure`

**Testing:**
- Test file: `/tmp/stormbreaker-test/test_secrets.txt`
- Detected: 1 connection string, 2 SAS tokens
- Verified: `heimdall --tool azure -v` output matches expected findings
```

### ‚ùå BAD - Too Vague
```markdown
### v4.6.0 (2025-12-15) - MINOR
**Azure Support:**
- Added Azure secrets detection
- Updated CLI help text
- Added new regex pattern
- Tests pass
```

**Problems with bad example:**
- ‚ùå No file locations or line numbers
- ‚ùå No code snippets or variable names
- ‚ùå No regex pattern shown
- ‚ùå No specific testing details
- ‚ùå Cannot quickly locate implementation

## How to Use This File (For AI Agents)

### When Starting a New Session:
1. Read `.version-tracking.md` first (before exploring codebase)
2. Identify recent changes and their locations
3. Use line numbers to jump directly to relevant code
4. Understand what's already implemented

### When Making Changes:
1. Complete your implementation
2. Note all file locations and line numbers
3. Copy relevant code snippets
4. Document regex patterns, algorithms, complex logic
5. Update `.version-tracking.md` with detailed entry
6. Update `CHANGELOG.md` with user-friendly summary

### When Asked "Where is X implemented?":
1. Search `.version-tracking.md` for keywords
2. Find exact line numbers and file paths
3. Provide specific location without exploring code

## File Location and Git Status

- **Path:** `/.version-tracking.md` (root of repository)
- **Git Status:** Listed in `.gitignore` (NOT committed)
- **Ownership:** Maintainer's personal tracking file
- **AI Role:** Read and update, but never commit to git

## Version Numbering (Semantic Versioning 2.0.0)

```
MAJOR.MINOR.PATCH
```

- **MAJOR (X.0.0):** Breaking changes (incompatible API changes)
- **MINOR (0.X.0):** New features (backward compatible)
- **PATCH (0.0.X):** Bug fixes (backward compatible)

## Summary

`.version-tracking.md` is your persistent memory as an AI coding agent. Treat it like a detailed lab notebook:
- üìç **Specific:** Exact file paths, line numbers, function names
- üîç **Searchable:** Keywords that help locate implementations quickly
- üíª **Technical:** Code snippets, regex patterns, algorithms
- üß™ **Tested:** What was tested and what results were obtained
- üìù **Complete:** Everything needed to understand the change without reading code

This file exists so you don't have to re-explore the codebase every session. Keep it detailed, keep it accurate, keep it updated.
